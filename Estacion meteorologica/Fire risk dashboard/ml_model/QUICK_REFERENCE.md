# ML Training - Quick Reference Card

## âš¡ TL;DR - Complete Workflow

```bash
# 1. Get API key from https://datospararesiliencia.cl

# 2. Navigate and activate
cd "/home/fguarda/Dev/Python/Estacion meteorologica/Fire risk dashboard/ml_model"
conda activate fire_risk_dashboard

# 3. Check everything is ready
python check_environment.py

# 4. Download fire dataset (2 minutes)
./download_fire_data.sh YOUR_API_KEY

# 5. Prepare training data (1-2 hours - can run in background)
python prepare_training_data.py

# 6. Train model (5 minutes)
python train_fire_model.py

# 7. Test dashboard
cd ..
streamlit run app.py
```

---

## ğŸ“Š Expected Output

### After `prepare_training_data.py`:
- âœ… `training_data.csv` (~1,232 rows)
- â±ï¸ Time: 1-2 hours

### After `train_fire_model.py`:
- âœ… `fire_model.pkl` (~220 KB, updated)
- âœ… `plots/feature_importance.png`
- âœ… `plots/confusion_matrix.png`
- âœ… `plots/roc_curve.png`
- â±ï¸ Time: 5 minutes
- ğŸ“ˆ Expected accuracy: 80-85%

---

## ğŸš¨ Common Issues

**"Fire dataset NOT downloaded"**
â†’ Run `./download_fire_data.sh YOUR_API_KEY`

**"Training is slow"**
â†’ Normal! ~1-2 hours for 616 fires. Safe to run overnight.

**"ML prediction doesn't show in dashboard"**
â†’ Restart Streamlit: `Ctrl+C` then `streamlit run app.py`

**"Permission denied: joblib"**
â†’ Ignore this warning, model trains fine in serial mode

---

## ğŸ“ Files Generated

```
ml_model/
â”œâ”€â”€ data/
â”‚   â””â”€â”€ cicatrices_incendios_resumen.geojson  â† Download first
â”œâ”€â”€ training_data.csv                          â† Generated by prepare
â”œâ”€â”€ fire_model.pkl                             â† Generated by train
â””â”€â”€ plots/
    â”œâ”€â”€ feature_importance.png                 â† For presentation!
    â”œâ”€â”€ confusion_matrix.png
    â””â”€â”€ roc_curve.png
```

---

## ğŸ¯ For Presentation

**Key metrics to mention:**
- Trained on 616 real fires (Araucania 2015-2024)
- 1,232 total samples (balanced: 50% fire / 50% non-fire)
- 80-85% accuracy on test data
- Most important features: days_no_rain (38%), temperature (37%)

**Files to show:**
- `plots/feature_importance.png` - validates your approach
- Dashboard screenshot with both predictions side-by-side
- `plots/roc_curve.png` - shows discrimination ability

---

## â±ï¸ Time Budget

| Task | Time | Can Leave? |
|------|------|------------|
| Get API key | 5 min | No |
| Download dataset | 2 min | No |
| Prepare training data | 1-2 hours | âœ… Yes |
| Train model | 5 min | No |
| Test dashboard | 2 min | No |
| **TOTAL** | **2-3 hours** | |

ğŸ’¡ **Tip:** Start `prepare_training_data.py` before dinner/sleep, then run training when done!

---

## ğŸ” Verification Commands

```bash
# Check environment
python check_environment.py

# Verify fire dataset exists
ls -lh data/cicatrices_incendios_resumen.geojson

# Check training data after preparation
wc -l training_data.csv  # Should show ~1233 (including header)

# Verify model file after training
ls -lh fire_model.pkl  # Should be ~220 KB

# Check plots were generated
ls -lh plots/
```

---

**Last updated:** January 2026
**Status:** âœ… Ready to execute
**Next action:** Get API key from https://datospararesiliencia.cl
